{% load static %}
{% include "header.html" %}
<head>
  <title>
    Government schemes
  </title>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>

</head>
<style>
    .infocard {
        margin: 10px;
        margin-top: 100px;
        /* border-radius: 12px; */
        width: calc(100% - 20px);
        /* background-image: linear-gradient(to right, rgb(116, 56, 245), rgb(221, 195, 248)); */
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        /* flex-wrap: wrap; */
        /* position: relative; */
        border-bottom: 5px solid #12a8ae;
        width: 90%;
        margin: auto;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        background-color: white;
        padding: 20px;
        border-radius: 0px;
        margin-bottom: 2rem;
    }

    .infocard div {
        margin: 10px;
    }

    .infocard img {
        width: 40%;
        position: relative;
        right: 20px;
        transition-duration: 0.3s;
    }

    .subdiv_img .card img {
        width: 100%;
    }

    .infocard img:hover {
        transform: scale(1.05);
    }

    @media screen and (max-width: 750px) {
        .infocard {
            flex-wrap: wrap;
        }

        .infocard img {
            min-width: 350px;
        }
    }
    @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

  * {
    font-family: "Poppins", sans-serif;
  }

  .main_sdiv {
    /* font-family: Arial, sans-serif; */
    margin-bottom: -2rem;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 30vh;
    /* background-color: #f2f2f2; */
  }

  .search-container {
    text-align: center;

  }

  .search-container h2 {
    margin-bottom: 1rem;
  }

  input {
    padding: 10px;
    width: 20rem;
    font-size: 16px;
    border: 1px solid #ccc;
  }
  input{
    width: 100%;
  }

  button {
    padding: 10px 20px;
    font-size: 1rem;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
  }

</style>
  
      
<style>
  .card {
      border: 1px solid #ccc;
      border-radius: 5px;
      padding: 20px;
      margin: 3vh auto 3vh auto;
      width: 100%;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
  }
  .card h2 {
      margin-top: 0;
  }
  .card p {
      margin-bottom: 0;
  }
  .button {
    display: inline-block;
    padding: 10px 20px;
    background-color: #12a8ae;
    color: #fff;
    text-decoration: none;
    border-radius: 0px;
    margin-top: 10px;
    margin-bottom: 1rem;
    border: none;
    width: max-content;
}
</style>

<main>
  <div class="main_sdiv">
    <div class="search-container">
      <h2><span class="translate">Diagnostics / Pathology Lab Search</span></h2>
      
        <div class="input-group">
          {% comment %} <input type="text" aria-label="Last name" class="form-control" placeholder="Service Name"> {% endcomment %}
          <input type="text" placeholder="location" id="locationInput1">
          <div id="location_suggestions1" class="suggestions"></div>
          <button type="button"  id="search"><i class="fa-solid fa-magnifying-glass"></i></button>
        </div>
      
    </div>
  </div>
  
<div id="cardList">
  <!-- Card items will be added dynamically using JavaScript -->
</div>

    <div class="infocard">
        <div class="text1">
            <p class="card-text">
            <h3 ><span class="translate">Diagnostics / Pathology Lab</span></h3>
            <span class="translate">A Pathology Lab, also known as a diagnostic laboratory or medical laboratory, is a facility where various medical tests are conducted to aid in the diagnosis, monitoring, and treatment of diseases and health conditions. These centers play a crucial role in healthcare by providing accurate and timely test results to healthcare professionals.</span>
            <button type="button m-3" class="btn btn-success">success</button>
        </div>
        <img src="{% static 'central_government_scheme.png' %}" alt="">
    </div>
  
<script>
  
  let data
  function setData(d) {
      data=d;
      console.log(data);
      populateCardList();
  }
  // var data = [
  //     {
  //         name: "xyz",
  //         name_owner: "vaibhav",
  //         contact: "1234567890",
  //         location: "Bagekari ali road",
  //         about_service: "abc"
  //     },
  //     {
  //         name: "Vaibhav Sanjay Bagekari",
  //         name_owner: "vaibhav",
  //         contact: "123456789",
  //         location: "Bagekari ali road",
  //         about_service: "abc"
  //     }
  // ];

  // Function to create card HTML
  function createCard(item) {
      var cardHTML = `
          <div class="card">
              <h2>${item.name}</h2>
              <p><strong>Name Owner:</strong> ${item.name_owner}</p>
              <p><strong>Degree:</strong> ${item.Degree}</p>
              <p><strong>Contact:</strong> ${item.contact}</p>
              <p><strong>Location:</strong> ${item.location}</p>
              <p><strong>About Service:</strong> ${item.about_service}</p>
              <a class="button" href="tel:${item.contact}">Contact</a>
          </div>
      `;
      
      return cardHTML;
  }

  // Function to populate card list
  function populateCardList() {
      var cardList = document.getElementById("cardList");
      
      // Clear previous content
      cardList.innerHTML = "";

      // Loop through data and create cards
      data.forEach(function(item) {
          var cardHTML = createCard(item);
          cardList.innerHTML += cardHTML;
      });
  }

  // Call populateCardList function to generate card list
  
</script>

    {% include "footer.html" %}
    <script>
        
    $(document).ready(function () {
        $('#search').click(function () {
          var info = document.getElementById('locationInput1').value;
          // console.log(info);
          $.ajax(
            {
              url: '/search_lab/',
            method: 'POST',
            data: { data: JSON.stringify(info) },
            success: function (response) {
              console.log(response);
              var message="No Diagnostic center are available at this location. Please try a different location.";
              check(response["lab"],message);
              setData(response["lab"]);
            },
            error: function (error) {
              console.error(error);
              alert('Error saving events!');
            }
          }
          )
        });
      });
    </script>
    <script>
      const location_searchInput1 = document.getElementById('locationInput1');
         
         const location_suggestions1 = document.getElementById('location_suggestions1');
         
    
         location_searchInput1.addEventListener('input', function () {
             const query = this.value.trim();
             if (query === '') {
                 suggestions.style.display = 'none';
                 return;
             }
    
             // Mock suggestions data
             const suggestionsData = ["Baramati", "Indapur", "Phaltan", "Akluj", "Natepute", "Bhigwan"];
             const filteredSuggestions = suggestionsData.filter(word => word.toLowerCase().includes(query.toLowerCase()));
    
             renderSuggestions(filteredSuggestions, location_suggestions1, location_searchInput1);
         });
         
    
         function renderSuggestions(suggestionsArray, suggestions, searchInput) {
             if (suggestionsArray.length === 0) {
                 suggestions.style.display = 'none';
                 return;
             }
    
             suggestions.innerHTML = '';
             suggestions.style.display = 'block';
             suggestionsArray.forEach(suggestion => {
                 const div = document.createElement('div');
                 div.classList.add('suggestion');
                 div.textContent = suggestion;
                 div.addEventListener('click', () => {
                     searchInput.value = suggestion;
                     suggestions.style.display = 'none';
                 });
                 suggestions.appendChild(div);
             });
         }
    </script>
</main>