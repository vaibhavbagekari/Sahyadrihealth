<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <style>
    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      text-wrap: nowrap;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 16px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    input[type="submit"] {
      background-color: #4caf50;
      color: #fff;
      cursor: pointer;
      margin-bottom: 0px;
    }

    input[name="username"]:hover {
      cursor: not-allowed;
    }

    input[type="submit"]:hover {
      background-color: #45a049;
    }

    .content {
      padding: 0px;
    }

    /* edit profile */
    .edit {
      width: calc(100%);
      /* display: flex; */
      align-items: center;
      justify-content: space-evenly;
      /* padding: 10px; */
    }

    .edit input {
      /* width: 200%; */
      border-radius: 0;
    }

    .img_div {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
      position: relative;
      /* Added */
    }

    .overlaye {
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      /* Adjust the overlay color and opacity as needed */
      opacity: 0;
      /* Initially invisible */
      transition: opacity 0.3s ease;
      /* Smooth transition */
    }

    .file_input {
      opacity: 0;
      position: absolute;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .custom_button {
      border: 2px solid white;
      font-size: .6rem;
      padding: .5rem .8rem;
      background-color: transparent;
      /* Change button color as needed */
      color: #fff;


      cursor: pointer;

    }

    .img_div:hover .overlaye {
      opacity: 1;
      /* Display overlay on hover */
    }

    .img_div img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .edit button {
      padding: .5rem 1.5rem;
      background-color: blue;
      border: none;
      color: white;
      /* margin-left: -5rem; */
      border-radius: 0;

    }

    .flex {
      display: flex;
      /* gap: 70%; */
      justify-content: space-around;
      width: 100%;

    }

    .lf {
      /* margin-left: -50%; */
    }

    @media screen and (max-width: 970px) {
      .flex {
        flex-direction: column;
        gap: 0;
      }

      .lf {
        margin-left: 0;
      }

      .edit button {
        margin-left: 0;
      }
    }

    @media screen and (max-width: 480px) {
      .edit {
        width: 100%;
        flex-direction: column;


      }

      .flex {
        padding: ;
      }

      #profile-form {
        width: 100%;
        padding: 1.5rem;
        margin-left: 1rem;
      }

      .edit input {
        width: 80%;
      }

    }

    .tab {
      overflow: hidden;
      border: 1px solid #ccc;
      background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
      background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
      background-color: #ccc;
    }

    /* Style the tab content */
    .tabcontent {
      display: none;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-top: none;
    }

    .text-bg-dark {
      max-height: 400px;
      overflow: hidden;
    }

    .text-bg-dark img {
      height: 100%;
    }

    #documentCards {
      display: flex;
      flex-direction: row;
      flex-wrap: wrap;
    }

    .card {
      width: 300px;
      border: 1px solid #ccc;
      border-radius: 5px;
      padding: 10px;
      margin: 10px;
    }

    .card img {
      max-width: 100%;
      height: auto;
    }

    #title_img_msg,
    #title_doc_msg,
    #title_img_msgi,
    #title_doc_msgi {
      display: none;
      color: red;
    }
    @import url('https://fonts.googleapis.com/css2?family=Rubik:ital,wght@0,300..900;1,300..900&family=Tiro+Devanagari+Marathi:ital@0;1&display=swap');

    * {
      font-family: "Poppins", sans-serif;

    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      text-wrap: nowrap;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 16px;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }

    input[type="submit"] {
      background-color: #4caf50;
      color: #fff;
      cursor: pointer;
      margin-bottom: 0px;
    }

    input[name="username"]:hover {
      cursor: not-allowed;
    }

    input[type="submit"]:hover {
      background-color: #45a049;
    }

    .content {
      padding: 0px;
    }

    /* edit profile */
    .edit {
      width: calc(100%);
      /* display: flex; */
      align-items: center;
      justify-content: space-evenly;
      /* padding: 10px; */
    }

    .edit input {
      /* width: 200%; */
      border-radius: 0;
    }

    .img_div {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      overflow: hidden;
      position: relative;
      /* Added */
    }

    .overlaye {
      position: absolute;
      display: flex;
      align-items: center;
      justify-content: center;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      /* Adjust the overlay color and opacity as needed */
      opacity: 0;
      /* Initially invisible */
      transition: opacity 0.3s ease;
      /* Smooth transition */
    }

    .file_input {
      opacity: 0;
      position: absolute;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .custom_button {
      border: 2px solid white;
      font-size: .6rem;
      padding: .5rem .8rem;
      background-color: transparent;
      /* Change button color as needed */
      color: #fff;


      cursor: pointer;

    }

    .img_div:hover .overlaye {
      opacity: 1;
      /* Display overlay on hover */
    }

    .img_div img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .edit button {
      padding: .5rem 1.5rem;
      background-color: blue;
      border: none;
      color: white;
      /* margin-left: -5rem; */
      border-radius: 0;

    }

    .flex {
      display: flex;
      /* gap: 70%; */
      justify-content: space-around;
      width: 100%;

    }

    .lf {
      /* margin-left: -50%; */
    }
    .form-div{
      /* position: relative;
      left: 50%;
      top: -50%;
      transform: translate(-50%,50%); */
      margin-top: 1rem;
      margin-bottom: 1rem;
   width: 70%;
      background-color: #fff;
            padding: 20px;
            border-radius: 0px;
            border-top: 5px solid #00A096;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    .form-div input{
      width: 60%;
    }
    @media screen and (max-width: 970px) {
      .flex {
        flex-direction: column;
        gap: 0;
      }

      .lf {
        margin-left: 0;
      }

      .edit button {
        margin-left: 0;
      }
    }

    @media screen and (max-width: 480px) {
      .edit {
        width: 100%;
        flex-direction: column;


      }

      .flex {
        padding: ;
      }

      #profile-form {
        width: 100%;
        padding: 1.5rem;
        margin-left: 1rem;
      }

      .edit input {
        width: 80%;
      }
      .form-div{
        width: 90%;
      }
      .form-div input{
        width: 90%;
      }

    }

    .tab {
      overflow: hidden;
      border: 1px solid #ccc;
      background-color: #f1f1f1;
    }

    /* Style the buttons inside the tab */
    .tab button {
      background-color: inherit;
      float: left;
      border: none;
      outline: none;
      cursor: pointer;
      padding: 14px 16px;
      transition: 0.3s;
      font-size: 17px;
    }

    /* Change background color of buttons on hover */
    .tab button:hover {
      background-color: #ddd;
    }

    /* Create an active/current tablink class */
    .tab button.active {
      background-color: #23aea3;
      color: black;
    }

    /* Style the tab content */
    .tabcontent {
      display: none;
      padding: 6px 12px;
      border: 1px solid #ccc;
      border-top: none;
    }

    .text-bg-dark {
      max-height: 400px;
      overflow: hidden;
    }

    .text-bg-dark img {
      height: 100%;
    }

    #documentCards,#documentCardsi {
      display: flex;
      flex-direction: row;
      
      flex-wrap: wrap;
    }

    .card {
      width: 300px;
      border: 1px solid #ccc;
      border-radius: 0px;
      padding: 10px;
      border-top: 5px solid #00A096;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin: 10px;
    }

    .card img {
      margin-top: .5rem;
      max-width: 100%;
      height: auto;
    }
    .card a{
      text-decoration: none;
    }

    #title_img_msg,
    #title_doc_msg,
    #title_img_msgi,
    #title_doc_msgi {
      display: none;
      color: red;
    }

    .Snav .tab {

      background-color: #343a40;

    }
  </style>
  {% include "drDashbord_header.html" %}
  <div class="content">
    <div class="header_div"><i class="fa fa-bars" aria-hidden="true" onclick="myFunction()"></i>
      <div class="title_bar">
        <h3><i class="fa-solid fa-gear" style="margin: 0px;"></i> setting</h3>
      </div>
    </div>



    <!-- Edit profile -->
    <h2 style="padding: 10px;">Edit Doctor Profile</h2>

    <div class="edit">
      <center>
        <div class="img_div">
          <img src="{{request.user.doctors.get.profile_picture.url}}" alt="Doctor Profile" id="profile_image" />
          <div class="overlaye">
            <input type="file" class="file_input" id="profile_picture">
            <label for="profile_picture" id="profile_picture" class="custom_button">Change <i
                class="fas fa-edit"></i></label>
          </div>
        </div>
      </center>


      <div class="flex">
        <div class="lf">


          <label for="username">username:</label>
          <input type="text" id="username" name="username" value="{{request.user.username }}" readonly><br>

          <label for="fname">First Name:</label>
          <input type="text" id="fname" name="fname" value="{{request.user.first_name }}" required><br>

          <label for="lname">Last Name:</label>
          <input type="text" id="lname" name="lname" value="{{request.user.last_name }}" required><br>

          <label for="Email">Email:</label>
          <input type="email" id="Email" name="Email" value="{{request.user.email}}" required><br>

          <label for="address">Addresss:</label>
          <input type="text" id="address" name="address" value="{{request.user.doctors.get.address}}" required><br>

          <label for="map">Map-Link:</label>
          <input type="text" id="map" name="map" value="{{request.user.doctors.get.mapLink}}" required><br>
          <a type="button" href="{{request.user.doctors.get.mapLink}}">Go to Map </a>
          <!-- Add other input fields for profile details -->
        </div>
        <div class="rf">
          <label for="age">Age:</label>
          <input type="number" id="age" name="age" value="{{request.user.doctors.get.age}}" required><br>

          <label for="Contact">Contact:</label>
          <input type="number" id="Contact" name="Contact" value="{{request.user.doctors.get.contact_no}}" required><br>
          <label for="Contact">Personal Contact:</label>
          <input type="number" id="personal_contact" name="personal_contact" value="{{request.user.doctors.get.personal_contact}}" required><br>
          
          <label for="Biography">Biography:</label>
          <input type="text" id="Biography" name="Biography" value="{{request.user.doctors.get.biography}}"
            required><br>


          <label for="category">Category:</label>
          <input type="text" id="category" name="category" value="{{request.user.doctors.get.category}}" required><br>

          <label for="specialization">Specialization:</label>
          <input type="text" id="specialization" name="" value="{{request.user.doctors.get.specialization}}" required>
        </div>
        <div class="rf">
          <label for="Experience">Experience:</label>
          <input type="text" id="Experience" name="Experience" value="{{request.user.doctors.get.experience}}" required>

          <label for="education">Education:</label>
          <input type="text" id="education" name="education" value="{{request.user.doctors.get.education}}" required>

          <label for="hospital_name">hospital Name:</label>
          <input type="text" id="hospital_name" name="hospital_name" value="{{request.user.doctors.get.hospital_name}}"
            required>

          <label for="opdfees">OPD Fees:</label>
          <input type="number" id="opdfees" name="opdfees" value="{{request.user.doctors.get.opdFees}}"
            required>


          <label for="license_no">license_no:</label>
          <input type="number" id="license_no" name="license_no" value="{{request.user.doctors.get.license_no}}"
            required>

          <label for="hospital_about">About Hospital</label>
          <textarea name="hospital_about" id="hospital_about" cols="30" rows="10"
            maxlength="20">{{request.user.doctors.get.hospital_about}}</textarea>
        </div>

      </div>
      <button type="submit" id="submit">Save</button>
      <h3>Add Images</h3>
      <div class="img_slider" style="margin-bottom: 5rem;padding: 10px;">
        {% include "Himg_slider.html" %}
      </div>
      {% comment %}
      <button class="ajax-button" data-param1="value1" data-param2="value2">Button 1</button>
      <button class="ajax-button" data-param1="value3" data-param2="value4">Button 2</button>
      <button class="ajax-button" data-param1="value5" data-param2="value6">Button 3</button> {% endcomment %}

      <nav class="Snav">

      <div class="tab">
        <button class="tablinks" onclick="openCity(event, 'Goverment')" id="gs">
          Goverment Schemes
        </button>
        <button class="tablinks" onclick="openCity(event, 'Insurance')">
          Health Insurance
        </button>
        <button class="tablinks" onclick="openCity(event, 'Other')">
          Other Services
        </button>
      </div>
      </nav>

      <div id="Goverment" class="tabcontent">

        {% include "GScard.html" %}
        <div class="form-div">
          <label for="title">Title:</label>
          <input type="text" id="heading" placeholder="enter the title of Goverment scheme">

          <label for="sub_title">Sub-title:</label>
          <input type="text" id="sub_title" placeholder="enter the sub-title of Goverment scheme">

          <label for="Document">Related Document</label>
          <input type="file" id="Document">
          <p id="title_doc_msg">Documet is required</p>

          <label for="title_img">Title Image:</label>
          <input type="file" id="title_img">
          <p id="title_img_msg">title image is required</p>

          <button id="addGS">Save</button>
        </div>
      </div>
      
      <div id="Insurance" class="tabcontent">
        {% include "Insurance_card.html" %}
        <div class="form-div">
          <label for="title">Title:</label>
          <input type="text" id="headingi" placeholder="enter the title of Goverment scheme">
  
          <label for="sub_title">Sub-title:</label>
          <input type="text" id="sub_titlei" placeholder="enter the sub-title of Goverment scheme">
  
          <label for="Document">Related Document</label>
          <input type="file" id="Documenti">
          <p id="title_doc_msgi">Documet is required</p>
  
          <label for="title_img">Title Image:</label>
          <input type="file" id="title_imgi">
          <p id="title_img_msgi">title image is required</p>
  
          <button id="addinsurance">Save</button>
        </div>

        

      </div>

      <div id="Other" class="tabcontent">
        No data found
      </div>

      <script>
        function openCity(evt, cityName) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(cityName).style.display = "block";
          evt.currentTarget.className += " active";
        }
      </script>

    </div>

    {% include "footer.html" %}
  </div>
  <!-- <script>
document.getElementById('fileInput').addEventListener('change', function(event) {
    const file = event.target.files[0];
    const imgElement = document.getElementById('profile_image');

    if (file) {
        imgElement.src = URL.createObjectURL(file);
    }
});
</script> -->
  </body>
  <script>
    function deleteGS(id) {
      // Replace "https://www.example.com" with the desired URL
      if (confirm("Do you want to delete this?")) {
        window.location.href = "/deleteGS/" + id;
      }
    }
    function deleteinsurance(id) {
      // Replace "https://www.example.com" with the desired URL
      if (confirm("Do you want to delete this?")) {
        window.location.href = "/deleteinsurance/" + id;
      }
    }
    $(document).ready(function () {
      $('#submit').click(function () {
        var profile_picture = document.getElementById("profile_picture").files;
        var username = document.getElementById("username").value;
        var first_name = document.getElementById("fname").value;
        var last_name = document.getElementById("lname").value;
        var Email = document.getElementById("Email").value;
        var age = document.getElementById("age").value;
        var Contact = document.getElementById("Contact").value;
        var personal_contact = document.getElementById("personal_contact").value;
        var Biography = document.getElementById("Biography").value;
        var category = document.getElementById("category").value;
        var specialization = document.getElementById("specialization").value;
        var Experience = document.getElementById("Experience").value;
        var education = document.getElementById("education").value;
        var hospital_name = document.getElementById("hospital_name").value;
        var license_no = document.getElementById("license_no").value;
        var hospital_about = document.getElementById("hospital_about").value;
        var map = document.getElementById("map").value;
        var opdfees = document.getElementById("opdfees").value;

        var updateDrdata = {
          "username": username,
          "first_name": first_name,
          "last_name": last_name,
          "Email": Email,
          "age": age,
          "Contact": Contact,
         
          "Biography": Biography,
          "category": category,
          "specialization": specialization,
          "Experience": Experience,
          "education": education,
          "hospital_name": hospital_name,
          "license_no": license_no,
          "hospital_about": hospital_about,
          "map":map,
          "opdfees":opdfees,
          "personal_contact":personal_contact,
        };
        var formData = new FormData();
        formData.append('data', JSON.stringify(updateDrdata));
        formData.append('picture', profile_picture[0]);
        $.ajax({
          url: '/updateDrData/',
          method: 'POST',
          data: formData,
          processData: false,
          contentType: false,
          success: function (response) {
            console.log(response);
            alert('Data Update successfully!');
          },
          error: function (error) {
            console.error(error);
            alert('something went wrong!! please try again ');
          }
        });
      });


      $.ajax({
        url: '/getGSinsurance/{{request.user.doctors.get.id}}',
        method: 'POST',
        data: ("id", {{ request.user.doctors.get.id }}),
      processData: false,
        contentType: false,
          success: function (response) {
            console.log(response['GSjson']);
            setgs(response['GSjson']);
            setinsurance(response['insurancejosn']);
          },
    error: function (error) {
      console.error(error);
      alert('something went wrong!! please try again ');
    }
    });

    $('#addGS').click(function () {
      var heading = document.getElementById("heading").value;
      var sub_title = document.getElementById("sub_title").value;
      var Document = document.getElementById("Document").files;
      var title_img = document.getElementById("title_img").files;
      
      if (title_img.length > 0) {
        if (Document.length > 0) {
          var addGS = {
            'title': heading,
            'sub_title': sub_title
          }

          var formData = new FormData();
          formData.append('data', JSON.stringify(addGS));
          formData.append('Document', Document[0]);
          formData.append('title_img', title_img[0]);
          $.ajax({
            url: '/addGS/{{request.user.doctors.get.id}}',
            method: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
              console.log(response['msg']);
              alert('Goverment Scheme added successfully!');

            },
            error: function (error) {
              console.error(error);
              alert('something went wrong!! please try again ');
            }
          });
        }
        else {
          document.getElementById("Document").style.border = "2px solid red";
          document.getElementById("title_doc_msg").style.display = "block";
        }
      }
      else {
        document.getElementById("title_img").style.border = "2px solid red";
        document.getElementById("title_img_msg").style.display = "block";

      }

    });
    $('#addinsurance').click(function () {
      var heading = document.getElementById("headingi").value;
      var sub_title = document.getElementById("sub_titlei").value;
      var Document = document.getElementById("Documenti").files;
      var title_img = document.getElementById("title_imgi").files;
      
      if (title_img.length > 0) {
        if (Document.length > 0) {
          var addGS = {
            'title': heading,
            'sub_title': sub_title
          }

          var formData = new FormData();
          formData.append('data', JSON.stringify(addGS));
          formData.append('Document', Document[0]);
          formData.append('title_img', title_img[0]);
          $.ajax({
            url: '/addinsurance/{{request.user.doctors.get.id}}',
            method: 'POST',
            data: formData,
            processData: false,
            contentType: false,
            success: function (response) {
              console.log(response['msg']);
              alert('Insurance added successfully!');

            },
            error: function (error) {
              console.error(error);
              alert('something went wrong!! please try again ');
            }
          });
        }
        else {
          document.getElementById("Documenti").style.border = "2px solid red";
          document.getElementById("title_doc_msgi").style.display = "block";
        }
      }
      else {
        document.getElementById("title_imgi").style.border = "2px solid red";
        document.getElementById("title_img_msgi").style.display = "block";

      }

    });

      });

  </script>

</html>
