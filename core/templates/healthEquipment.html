{% load static %}
{% include "header.html" %}
<title>Blood Storage Center Search</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

  * {
    font-family: "Poppins", sans-serif;
  }

  .main_sdiv {
    /* font-family: Arial, sans-serif; */
    margin-bottom: -2rem;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 30vh;
    background-color: #f2f2f2;
  }

  .search-container {
    text-align: center;

  }

  .search-container h2 {
    margin-bottom: 1rem;
  }

  input {
    padding: 10px;
    width: 20rem;
    font-size: 16px;
    border: 1px solid #ccc;
  }

  button {
    padding: 10px 20px;
    font-size: 1rem;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
  }

  #suggestions {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 200px;
    overflow-y: auto;
    border: 2px solid #ccc;
    border-top: none;
  }

  .suggestion-item {
    padding: 10px;
    cursor: pointer;
    transition: background-color 0.3s;
  }

  .suggestion-item:hover {
    background-color: #ddd;
  }

  .gradient-container {
    position: relative;
    width: 100%;
    height: 400px;
    background: linear-gradient(to right, rgba(53, 153, 241, 0.777), rgba(255, 255, 255, 0.5)),
    url("{% static 'image3.jpg' %} ");
    background-size: cover;
    background-position: center;
    color: #125953;
    ;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    color: black;
  }

  .sresult {
    width: 100%;
    height: 70vh;
    background-color: #f2f2f2;
    overflow-y: scroll
  }

  .profile_card {
    height: max-content;
    display: flex;
    justify-content: center;
    padding: 2rem;
    margin: 1rem;
    background-color: #bebebe;
    box-shadow: 2px 2px 2px rgba(67, 67, 67, 0.551);
    transition-duration: 0.3s;
    border-radius: 10px;
  }

  .profile_card:hover {
    background-color: #acababc3;
    box-shadow: 4px 4px 2px rgba(67, 67, 67, 0.551);
  }

  .img_div {
    margin: 5px;
    padding: 8px;
    border-radius: 50%;
    /* overflow: hidden; */
  }

  .context_div {
    margin: 5px;
    padding: 8px;
  }


  @media screen and (max-width: 500px) {
    input {
      width: 15rem;
    }
  }

  @media screen and (max-width: 400px) {
    input {
      width: 10rem;
    }
  }

  .flex {

    display: flex;
    justify-content: space-around;
    height: 500px;
    align-items: center;
  }

  .flex .card {
    width: 25%;
    border-bottom: 5px solid #12a8ae;


    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);




    border-radius: 0;
  }

  /* .flex .card:nth-child(2){
    margin-left: -5rem;
  } */
  .flex .card img {
    width: 100%;
    height: 50%;
  }

  .flex .card p,
  .flex .card h3 {
    padding: .5rem;
  }

  @media screen and (max-width: 700px) {
    .flex {
      height: max-content;
      flex-direction: column;
    }

    .flex .card {
      width: 85%;
      border-radius: 0;
      height: 50vh;
      margin-bottom: .8rem;
    }

    /* .flex .card:nth-child(2){
    margin-left: 10rem;
  } */
  }
</style>
<main>


  <div class="gradient-container">
    <div class="content">
      <h1>Equipment Availability</h1>
      <p>Your content goes here.</p>
    </div>
  </div>
  <div class="main_sdiv">
    <div class="search-container">
      <h2>Equipment Availability Search</h2>

      <div class="input-group">
        <!-- {% comment %} <input type="text" aria-label="Last name" class="form-control" placeholder="Service Name"> {% endcomment %} -->
        <input type="text" aria-label="First name" class="form-control" placeholder="location" id="locationInput">
        <button type="button" class="input-group-text" id="search"><i class="fa-solid fa-magnifying-glass"></i></button>
      </div>

    </div>
  </div><br><br>
  
<style>
  .card {
      border: 1px solid #ccc;
      border-radius: 5px;
      padding: 20px;
      margin: 3vh auto 3vh auto;
      width: 100%;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
  }
  .card h2 {
      margin-top: 0;
  }
  .card p {
      margin-bottom: 0;
  }
</style>

<div id="cardList">
  <!-- Card items will be added dynamically using JavaScript -->
</div>
<img src="" alt="">
<script>
  
  let data
  function setData(d) {
      data=d;
      console.log(data);
      populateCardList();
  }
  // var data = [
  //     {
  //         name: "xyz",
  //         name_owner: "vaibhav",
  //         contact: "1234567890",
  //         location: "Bagekari ali road",
  //         about_service: "abc"
  //     },
  //     {
  //         name: "Vaibhav Sanjay Bagekari",
  //         name_owner: "vaibhav",
  //         contact: "123456789",
  //         location: "Bagekari ali road",
  //         about_service: "abc"
  //     }
  // ];

  // Function to create card HTML
  function createCard(item) {
      var cardHTML = `
          <div class="card">
              <h2>${item.title}</h2>
              <p><strong>Name Owner:</strong> ${item.sub_title}</p>
              <p><strong>Contact:</strong> ${item.contact}</p>
              <p><strong>Location:</strong> ${item.location}</p>
              <img src="${item.title_img}" alt="" style="width:50%">
          </div>
      `;
      
      return cardHTML;
  }

  // Function to populate card list
  function populateCardList() {
      var cardList = document.getElementById("cardList");
      
      // Clear previous content
      cardList.innerHTML = "";

      // Loop through data and create cards
      data.forEach(function(item) {
          var cardHTML = createCard(item);
          cardList.innerHTML += cardHTML;
      });
  }

  // Call populateCardList function to generate card list
  
</script>

  {% comment %} <div class="flex">
    <div class="card">
      <img
        src="https://img.freepik.com/free-psd/hospital-empty-operation-room-with-surgery-bed-surgery-light-generative-ai_587448-1993.jpg?t=st=1714820019~exp=1714823619~hmac=2246bbea17ecb0c3c2e4aa53218ede4405d22f1951bcf6fee3982c76b88feb90&w=1380"
        alt=""><br>
      <h3>Abc</h3>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Magnam, cumque.</p>
    </div>
    <div class="card">
      <img
        src="https://img.freepik.com/free-photo/stethoscope-surgical-mask-scissor-tweezers-colored-background_23-2147874852.jpg?t=st=1714816961~exp=1714820561~hmac=a1b0378c6924fc4051604ee745f5e27592649dc00b01caae8c67b8c729025ce5&w=996"
        alt=""><br>
      <h3>Abc</h3>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, reiciendis?</p>
    </div>
  </div><br>
  <div class="flex">
    <div class="card">
      <img
        src="https://img.freepik.com/free-photo/empty-modern-hospital-office-room-equipped-with-medical-professional-equipment-ready-patient-consultation-computer-standing-table-having-human-body-skeleton-screen-medicine-concept_482257-38412.jpg?t=st=1714819916~exp=1714823516~hmac=764d84a6f532f90ccee005865bc1f287adfc46e17a1b3f005e47cf0bb64e0fb3&w=996"
        alt=""><br>
      <h3>Abc</h3>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Magnam, cumque.</p>
    </div>
    <div class="card">
      <img
        src="https://img.freepik.com/free-photo/hospital-equipment-surgical-procedure_23-2148962525.jpg?t=st=1714819739~exp=1714823339~hmac=3a341f22b0a4595dc9155681a0ab1ede609d266ec7b04df3cef0c108a603b721&w=996"
        alt=""><br>
      <h3>Abc</h3>
      <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, reiciendis?</p>
    </div>
  </div>
 {% endcomment %}


  {% include "footer.html" %}
</main>

<script>

  $(document).ready(function () {
    $('#search').click(function () {
      var info = document.getElementById('locationInput').value;
      // console.log(info);
      $.ajax(
        {
          url: '/SearchhealthEquipment/',
          method: 'POST',
          data: { data: JSON.stringify(info) },
          success: function (response) {
            console.log(response);
            setData(response["healthEquipment_list"]);
          },
          error: function (error) {
            console.error(error);
            alert('Error saving events!');
          }
        }
      )
    });
  });
</script>
</body>

</html>